package_name: snipsowm
class_name: SnipsOWM
description: Open Weather Map skill
requires_tts: True
intents:
  - intent: SearchWeatherForecastTemperature
    action: |
      {%
      locality = None
      %}
  - intent: SearchWeatherForecast
    action: |
      {%
      locality = None
      %}
  - intent: SearchWeatherForecastCondition
    action: |
      {%
      from snipsfakeweather.snipsfakeweather import WeatherCondition

      locality = None
      try:
        locality = intent.forecast_locality \
          or intent.forecast_country \
          or intent.forecast_region \
          or intent.forecast_geographical_poi
      except Exception:
        pass

      datetime = None
      granularity = None
      if isinstance(intent.forecast_start_date_time, InstantTime):
        datetime = intent.forecast_start_date_time.datetime
        granularity = intent.forecast_start_date_time.granularity
      elif isinstance(intent.forecast_start_date_time, TimeInterval):
        datetime = intent.forecast_start_date_time.start

      condition = None
      try:
        name = intent.forecast_condition_name
      except Exception:
        pass

      skill.speak_condition(condition, datetime, granularity=granularity, locality=locality)
      %}